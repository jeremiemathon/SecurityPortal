{% extends 'securitypolicy/base.html' %}
{% block content %}
<h1>{{ subsection.title }} - Rules</h1>
{{ subsection.description|safe }}

{% if not rules %}
<div class="alert alert-danger alert-dismisible fade show">
  <h4 class="alert-heading"> No rules... Going back...</h4>
</div>
<script>
setTimeout('history.go(-1)', 3000);
</script>
{% else %}
<ul>
  <article class="media content-section">
    <div class="media-body">
      <table class="table table-striped table-hover">
        <thead class="thead-dark">
        <tr>
          <th>
            <a href="{% url 'policy-home' %}" class="btn btn-primary">{{ policy.title }}</a> >
            <a href="{% url 'section-list' policy.id %}" class="btn btn-primary">{{ section.title }}</a> >
            <a href="{% url 'subsection-list' policy.id section.id %}" class="btn btn-primary">{{ subsection.title }}</a> > <i class="fas fa-folder"></i> Sections
          </th>
        </tr>
        </thead>
        <tbody>
        {% for rule in rules %}<tr>
          <td>
            <div class="row">
              <div class="col-sm-6">
                <h5><i class="fas fa-greater-than"></i> <a class="article-title" href="{% url 'rule-detail' rule.pk %}">{{ rule.title }}</a></h5>
                <p class="article-content">{{ rule.content|safe|truncatechars:250 }}</p>
              </div>
              <div class="col-sm-6 text-right">
                <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-placement="left" data-trigger="focus" data-html="true" data-content="{{ subsection.description|safe|truncatechars:250 }}">
                  Details
                </button>
              </div>
          </td>
        </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </article>
</ul>
{% endif %}
{% endblock content %}
